# P0 Core Chat - Regression Checklist

デプロイ前や大きな変更のマージ前に確認すべきチェックリストです。

## 1. 認証 / Auth (OIDC)
- [ ] ログイン画面から IdP へ遷移できるか
- [ ] ログイン成功後、アプリのホーム画面へリダイレクトされるか
- [ ] トークン期限切れ時に適切にログアウトまたは再ログインを促されるか
- [ ] 未認証状態で `/chat` 等の保護リソースにアクセスした際、ログイン画面へリダイレクトされるか

## 2. Core Chat UI
- [ ] **送信**: テキストメッセージを送信できるか
- [ ] **受信**: ストリーミング応答が途切れずに最後まで表示されるか
- [ ] **履歴**: 過去のチャット履歴が表示されるか
- [ ] **Markdown**: 字下げ、リスト、太字、コードブロックが崩れずに表示されるか
- [ ] **エラー**: ネットワーク切断時などに適切なエラーメッセージが出るか

## 3. Knowledge / Admin
- [ ] 管理者ユーザーでログインした場合、管理者メニューが表示されるか
- [ ] 一般ユーザーでログインした場合、管理者メニューが非表示（アクセス不可）か
- [ ] `/knowledge` (管理者用) にナレッジ一覧が表示されるか

## 4. Settings / Help
- [ ] `/settings` での言語・テーマ変更が即時反映されるか
- [ ] リロード後も設定が維持されているか
- [ ] ヘルプページ (`/help`) のコンテンツが表示されるか
- [ ] **[既知の制限]** OIDC未連携環境では一部設定UIがモックデータ表示となる場合があることを確認済みか

## 5. System / Error Handling
- [ ] 存在しないページ (`/not-found`) にアクセスした際、404 画面またはホームへの誘導が出るか
- [ ] 権限のないページへのアクセスで 403 エラー (またはホーム転送) となるか
- [ ] Backend 停止中に操作した場合、無限ロードにならずエラーが表示されるか
