<div class="page">
  <mat-card>
    <mat-card-header>
      <mat-card-title>表示設定</mat-card-title>
      <mat-card-subtitle>テーマ・言語・文字サイズを変更できます</mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
      <form [formGroup]="form" class="form">
        <div class="field">
          <mat-form-field appearance="outline">
            <mat-label>テーマ</mat-label>
            <mat-select formControlName="theme">
              <mat-option value="light">ライト</mat-option>
              <mat-option value="dark">ダーク</mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <div class="field">
          <mat-form-field appearance="outline">
            <mat-label>言語</mat-label>
            <mat-select formControlName="language">
              <mat-option value="ja">日本語</mat-option>
              <mat-option value="en">English</mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <div class="field">
          <span class="field-label">文字サイズ</span>
          <mat-radio-group formControlName="fontSize" class="radio-group">
            <mat-radio-button value="small">小</mat-radio-button>
            <mat-radio-button value="medium">中</mat-radio-button>
            <mat-radio-button value="large">大</mat-radio-button>
          </mat-radio-group>
        </div>

        <div class="field toggles">
          <mat-slide-toggle formControlName="hasSeenOnboarding">
            オンボーディングを見たことがある
          </mat-slide-toggle>
          <mat-slide-toggle formControlName="onboardingSkipped">
            オンボーディングをスキップした
          </mat-slide-toggle>
        </div>
      </form>

      <div class="status" *ngIf="isLoading()">
        <mat-progress-spinner diameter="32" mode="indeterminate"></mat-progress-spinner>
        <span>読み込み中...</span>
      </div>
      <div class="status error" *ngIf="error() && !isLoading()">
        <mat-icon color="warn">error</mat-icon>
        <span>{{ error()?.message }}</span>
      </div>
    </mat-card-content>

    <mat-card-actions align="end">
      <button mat-stroked-button color="primary" (click)="loadSettings()" [disabled]="isSaving()">再読み込み</button>
      <button mat-flat-button color="primary" (click)="onSave()" [disabled]="isSaving() || isLoading()">
        <mat-icon>save</mat-icon>
        保存する
        <mat-progress-spinner *ngIf="isSaving()" diameter="18" mode="indeterminate"></mat-progress-spinner>
      </button>
    </mat-card-actions>
  </mat-card>
</div>
