============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-8.4.2, pluggy-1.6.0
rootdir: /home/masahiro/work/dom-enterprise-gateway/backend
configfile: pyproject.toml
plugins: langsmith-0.4.55, anyio-4.12.0, asyncio-0.23.8
asyncio: mode=Mode.STRICT
collected 29 items / 6 errors

==================================== ERRORS ====================================
______________ ERROR collecting app/tests/test_endpoints_admin.py ______________
app/tests/test_endpoints_admin.py:7: in <module>
    from app.main import app
app/main.py:2: in <module>
    from app.api.endpoints import auth, chat, files, admin, feedback # auth, chat, files, admin, feedbackルーターをインポート
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
app/api/endpoints/files.py:15: in <module>
    @router.post("/upload", response_model=FileUploadResponse, summary="ファイルをアップロードし、ナレッジドキュメントとして登録 (任意でEphemeral RAGへ)")
     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/fastapi/routing.py:994: in decorator
    self.add_api_route(
.venv/lib/python3.12/site-packages/fastapi/routing.py:933: in add_api_route
    route = route_class(
.venv/lib/python3.12/site-packages/fastapi/routing.py:554: in __init__
    self.dependant = get_dependant(path=self.path_format, call=self.endpoint)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/fastapi/dependencies/utils.py:285: in get_dependant
    param_details = analyze_param(
.venv/lib/python3.12/site-packages/fastapi/dependencies/utils.py:482: in analyze_param
    ensure_multipart_is_installed()
.venv/lib/python3.12/site-packages/fastapi/dependencies/utils.py:115: in ensure_multipart_is_installed
    raise RuntimeError(multipart_not_installed_error) from None
E   RuntimeError: Form data requires "python-multipart" to be installed. 
E   You can install "python-multipart" with: 
E   
E   pip install python-multipart
______________ ERROR collecting app/tests/test_endpoints_auth.py _______________
app/tests/test_endpoints_auth.py:6: in <module>
    from app.main import app
app/main.py:2: in <module>
    from app.api.endpoints import auth, chat, files, admin, feedback # auth, chat, files, admin, feedbackルーターをインポート
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
app/api/endpoints/files.py:15: in <module>
    @router.post("/upload", response_model=FileUploadResponse, summary="ファイルをアップロードし、ナレッジドキュメントとして登録 (任意でEphemeral RAGへ)")
     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/fastapi/routing.py:994: in decorator
    self.add_api_route(
.venv/lib/python3.12/site-packages/fastapi/routing.py:933: in add_api_route
    route = route_class(
.venv/lib/python3.12/site-packages/fastapi/routing.py:554: in __init__
    self.dependant = get_dependant(path=self.path_format, call=self.endpoint)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/fastapi/dependencies/utils.py:285: in get_dependant
    param_details = analyze_param(
.venv/lib/python3.12/site-packages/fastapi/dependencies/utils.py:482: in analyze_param
    ensure_multipart_is_installed()
.venv/lib/python3.12/site-packages/fastapi/dependencies/utils.py:115: in ensure_multipart_is_installed
    raise RuntimeError(multipart_not_installed_error) from None
E   RuntimeError: Form data requires "python-multipart" to be installed. 
E   You can install "python-multipart" with: 
E   
E   pip install python-multipart
______________ ERROR collecting app/tests/test_endpoints_chat.py _______________
app/tests/test_endpoints_chat.py:8: in <module>
    from app.main import app
app/main.py:2: in <module>
    from app.api.endpoints import auth, chat, files, admin, feedback # auth, chat, files, admin, feedbackルーターをインポート
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
app/api/endpoints/files.py:15: in <module>
    @router.post("/upload", response_model=FileUploadResponse, summary="ファイルをアップロードし、ナレッジドキュメントとして登録 (任意でEphemeral RAGへ)")
     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/fastapi/routing.py:994: in decorator
    self.add_api_route(
.venv/lib/python3.12/site-packages/fastapi/routing.py:933: in add_api_route
    route = route_class(
.venv/lib/python3.12/site-packages/fastapi/routing.py:554: in __init__
    self.dependant = get_dependant(path=self.path_format, call=self.endpoint)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/fastapi/dependencies/utils.py:285: in get_dependant
    param_details = analyze_param(
.venv/lib/python3.12/site-packages/fastapi/dependencies/utils.py:482: in analyze_param
    ensure_multipart_is_installed()
.venv/lib/python3.12/site-packages/fastapi/dependencies/utils.py:115: in ensure_multipart_is_installed
    raise RuntimeError(multipart_not_installed_error) from None
E   RuntimeError: Form data requires "python-multipart" to be installed. 
E   You can install "python-multipart" with: 
E   
E   pip install python-multipart
____________ ERROR collecting app/tests/test_endpoints_feedback.py _____________
app/tests/test_endpoints_feedback.py:7: in <module>
    from app.main import app
app/main.py:2: in <module>
    from app.api.endpoints import auth, chat, files, admin, feedback # auth, chat, files, admin, feedbackルーターをインポート
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
app/api/endpoints/files.py:15: in <module>
    @router.post("/upload", response_model=FileUploadResponse, summary="ファイルをアップロードし、ナレッジドキュメントとして登録 (任意でEphemeral RAGへ)")
     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/fastapi/routing.py:994: in decorator
    self.add_api_route(
.venv/lib/python3.12/site-packages/fastapi/routing.py:933: in add_api_route
    route = route_class(
.venv/lib/python3.12/site-packages/fastapi/routing.py:554: in __init__
    self.dependant = get_dependant(path=self.path_format, call=self.endpoint)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/fastapi/dependencies/utils.py:285: in get_dependant
    param_details = analyze_param(
.venv/lib/python3.12/site-packages/fastapi/dependencies/utils.py:482: in analyze_param
    ensure_multipart_is_installed()
.venv/lib/python3.12/site-packages/fastapi/dependencies/utils.py:115: in ensure_multipart_is_installed
    raise RuntimeError(multipart_not_installed_error) from None
E   RuntimeError: Form data requires "python-multipart" to be installed. 
E   You can install "python-multipart" with: 
E   
E   pip install python-multipart
______________ ERROR collecting app/tests/test_endpoints_files.py ______________
app/tests/test_endpoints_files.py:7: in <module>
    from app.main import app
app/main.py:2: in <module>
    from app.api.endpoints import auth, chat, files, admin, feedback # auth, chat, files, admin, feedbackルーターをインポート
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
app/api/endpoints/files.py:15: in <module>
    @router.post("/upload", response_model=FileUploadResponse, summary="ファイルをアップロードし、ナレッジドキュメントとして登録 (任意でEphemeral RAGへ)")
     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/fastapi/routing.py:994: in decorator
    self.add_api_route(
.venv/lib/python3.12/site-packages/fastapi/routing.py:933: in add_api_route
    route = route_class(
.venv/lib/python3.12/site-packages/fastapi/routing.py:554: in __init__
    self.dependant = get_dependant(path=self.path_format, call=self.endpoint)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/fastapi/dependencies/utils.py:285: in get_dependant
    param_details = analyze_param(
.venv/lib/python3.12/site-packages/fastapi/dependencies/utils.py:482: in analyze_param
    ensure_multipart_is_installed()
.venv/lib/python3.12/site-packages/fastapi/dependencies/utils.py:115: in ensure_multipart_is_installed
    raise RuntimeError(multipart_not_installed_error) from None
E   RuntimeError: Form data requires "python-multipart" to be installed. 
E   You can install "python-multipart" with: 
E   
E   pip install python-multipart
___________________ ERROR collecting app/tests/test_main.py ____________________
app/tests/test_main.py:2: in <module>
    from app.main import app
app/main.py:2: in <module>
    from app.api.endpoints import auth, chat, files, admin, feedback # auth, chat, files, admin, feedbackルーターをインポート
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
app/api/endpoints/files.py:15: in <module>
    @router.post("/upload", response_model=FileUploadResponse, summary="ファイルをアップロードし、ナレッジドキュメントとして登録 (任意でEphemeral RAGへ)")
     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/fastapi/routing.py:994: in decorator
    self.add_api_route(
.venv/lib/python3.12/site-packages/fastapi/routing.py:933: in add_api_route
    route = route_class(
.venv/lib/python3.12/site-packages/fastapi/routing.py:554: in __init__
    self.dependant = get_dependant(path=self.path_format, call=self.endpoint)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.12/site-packages/fastapi/dependencies/utils.py:285: in get_dependant
    param_details = analyze_param(
.venv/lib/python3.12/site-packages/fastapi/dependencies/utils.py:482: in analyze_param
    ensure_multipart_is_installed()
.venv/lib/python3.12/site-packages/fastapi/dependencies/utils.py:115: in ensure_multipart_is_installed
    raise RuntimeError(multipart_not_installed_error) from None
E   RuntimeError: Form data requires "python-multipart" to be installed. 
E   You can install "python-multipart" with: 
E   
E   pip install python-multipart
=============================== warnings summary ===============================
app/schemas/auth.py:4
  /home/masahiro/work/dom-enterprise-gateway/backend/app/schemas/auth.py:4: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class AuthenticatedUser(BaseModel):

app/schemas/chat.py:15
  /home/masahiro/work/dom-enterprise-gateway/backend/app/schemas/chat.py:15: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class ChatMessageResponse(BaseModel):

app/schemas/chat.py:36
  /home/masahiro/work/dom-enterprise-gateway/backend/app/schemas/chat.py:36: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class ChatSessionResponse(BaseModel):

app/schemas/file.py:5
  /home/masahiro/work/dom-enterprise-gateway/backend/app/schemas/file.py:5: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class FileUploadResponse(BaseModel):

app/schemas/feedback.py:16
  /home/masahiro/work/dom-enterprise-gateway/backend/app/schemas/feedback.py:16: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class FeedbackResponse(BaseModel):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
ERROR app/tests/test_endpoints_admin.py - RuntimeError: Form data requires "p...
ERROR app/tests/test_endpoints_auth.py - RuntimeError: Form data requires "py...
ERROR app/tests/test_endpoints_chat.py - RuntimeError: Form data requires "py...
ERROR app/tests/test_endpoints_feedback.py - RuntimeError: Form data requires...
ERROR app/tests/test_endpoints_files.py - RuntimeError: Form data requires "p...
ERROR app/tests/test_main.py - RuntimeError: Form data requires "python-multi...
!!!!!!!!!!!!!!!!!!! Interrupted: 6 errors during collection !!!!!!!!!!!!!!!!!!!!
======================== 5 warnings, 6 errors in 1.43s =========================
